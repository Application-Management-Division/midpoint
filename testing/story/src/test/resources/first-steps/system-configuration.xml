<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  ~ Copyright (c) 2020 Evolveum and contributors
  ~
  ~ This work is dual-licensed under the Apache License 2.0
  ~ and European Union Public License. See LICENSE file for details.
  -->
<systemConfiguration oid="00000000-0000-0000-0000-000000000001"
    xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3">
    <name>SystemConfiguration</name>
    <simulation>
        <metric>
            <identifier>modifications</identifier>
            <computation>
                <original>
                    <expression>
                        <script>
                            <code>
                                import com.evolveum.midpoint.prism.delta.ChangeType
                                import com.evolveum.midpoint.prism.delta.ObjectDelta

                                ObjectDelta delta = processedObject.delta
                                if (delta?.changeType == ChangeType.MODIFY) {
                                    delta.modifications.size()
                                } else {
                                    0
                                }
                            </code>
                        </script>
                    </expression>
                </original>
            </computation>
        </metric>
    </simulation>
</systemConfiguration>
